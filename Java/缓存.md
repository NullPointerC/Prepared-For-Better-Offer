### Redis和Memcache有什么区别?你是如何选用的?

memcache使用多线程异步I/O，可以利用CPU多核优势，使用内存存储数据，只支持K-V数据结构，不支持持久化和主从同步，失效策略使用延迟过期策略。

容量满时会使用LRU策略剔除，key不超过250字节，value不超过1M字节，最大失效时间为30天。

redis使用单线程模式，redis支持持久化，不仅可以用作缓存，还直接nosql数据库，还支持多种数据类型，支持主从同步。

### 你用到过哪些Redis的数据结构?是在什么场景下用的?

Redis 内部使用字典来存储不同类型的数据，Redis支持的string、hash、list、set和sorted set 5种类型。

string使用SDS动态字符串（Simple Dynamic String）实现，提前分配冗余空间来减少内存频繁分配；

list由ziplist（压缩列表）和linkedlist（双链表）实现，ziplist存储在连续内存上，不适合修改操作，linkedlist花销大，地址不连续，容易产生碎片，从3.2之后产生了quicklist数据结构，本身是一个双向无环链表；他的每一个节点都是一个ziplist，将二者相互结合；

hash由ziplist和hashtable两种实现，当hashtable中所有key和value的长度都小于64时，并且键值对数量小于512时使用ziplist，超过时使用hashtable；

set类型的内部实现是通过intset和hashtable实现，当集合中元素小于512时，且都是数值，就是用intset；

sorted set的实现可以是ziplist和skiplist跳表来实现，当有序集合中元素个数小于128个并且所有元素的长度都小于64字节使用ziplist，否则转换成skiplist；

### Redis有哪些持久化方式，区别是什么?

redis提供两种方式进行持久化，一种是RDB持久化，一种是AOF持久化。

RDB的实现方式是：将Reids在内存中的数据库记录定时dump到磁盘上；

AOF的实现方式是：将Reids的操作日志以追加的方式写入文件；





