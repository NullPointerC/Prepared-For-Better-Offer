### Redis简介

数据库的cache功能并不够好，所以需要其他的cache来缓解数据库的压力。

如下是一个带缓存系统架构图：

![image-20220301211137742](https://gitee.com/cao_ziqiang/img/raw/master/20220301211137.png)

### memcache和redis



`memcache`代码层次类似与`hash`

区别主要在于：

- 前者只支持简单的数据类型，redis的数据类型更加丰富；
- 前者不支持数据持久化存储，一旦数据库宕机，数据将丢失，后者支持数据磁盘的持久化存储；
- 前者不支持主从同步，后者支持主从同步；
- 前者不支持分片（分片是指将数据分到若干个物理分区），后者支持分片；

简单的`key-value`存储可以选择`memcache`，`redis`适合有高级需求的系统；

### redis快的原因

- 完全基于内存，绝大部分请求都是纯粹的内存操作，执行效率高；
- 数据结构简单，对数据的操作也比较简单，不像mysql建立关系，只是通过`key-value`关联；
- 采用单线程，单线程也能处理高并发请求，想多核也可以启动多实例。redis的单线程主要指其主线程是单线程的，包括`I/O`的处理和请求时间的处理，还有包括过期键处理和复制处理，这些非`I/O`的任务被封装为了周期性的执行，对于客户端的所有请求，都由主线程串行处理，避免了上下文切换和锁竞争；
- 使用了多路`I/O`复用模型，非阻塞`I/O`；

